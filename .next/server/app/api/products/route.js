"use strict";(()=>{var e={};e.id=684,e.ids=[684],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9738:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>w,requestAsyncStorage:()=>l,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>y});var s={};r.r(s),r.d(s,{DELETE:()=>m,GET:()=>u,POST:()=>d,PUT:()=>p});var n=r(9303),a=r(8716),i=r(670),o=r(7070),c=r(1306);async function u(){let e=await (0,c.Xp)();return o.NextResponse.json(e)}async function d(e){try{let t=await e.json(),r={id:t.id||`product-${Date.now()}`,nameEn:t.nameEn||"",nameAr:t.nameAr||"",descEn:t.descEn||"",descAr:t.descAr||"",category:t.category||"interior",seriesEn:t.seriesEn||"",seriesAr:t.seriesAr||"",badges:t.badges||[],image:t.image||"",images:t.images||[],finishes:t.finishes||[],specs:t.specs||{material:"",dimensions:"",finish:""},ref:t.ref||`WDF-NEW-${Date.now()}`,price:t.price||0,priceTiers:t.priceTiers||[],showInStore:void 0===t.showInStore||t.showInStore};return await (0,c.gK)(r),o.NextResponse.json(r,{status:201})}catch{return o.NextResponse.json({error:"Invalid request"},{status:400})}}async function p(e){try{let{id:t,...r}=await e.json();if(!t)return o.NextResponse.json({error:"Missing product id"},{status:400});let s=await (0,c.nM)(t,r);if(!s)return o.NextResponse.json({error:"Product not found"},{status:404});return o.NextResponse.json(s)}catch{return o.NextResponse.json({error:"Invalid request"},{status:400})}}async function m(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id");if(!r)return o.NextResponse.json({error:"Missing product id"},{status:400});if(!await (0,c.Ir)(r))return o.NextResponse.json({error:"Product not found"},{status:404});return o.NextResponse.json({success:!0})}catch{return o.NextResponse.json({error:"Invalid request"},{status:400})}}let g=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/products/route",pathname:"/api/products",filename:"route",bundlePath:"app/api/products/route"},resolvedPagePath:"/mnt/c/Users/Feras/Desktop/AI WEBSITE/door/src/app/api/products/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:y,serverHooks:f}=g,h="/api/products/route";function w(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:y})}},1306:(e,t,r)=>{r.d(t,{LO:()=>l,fS:()=>f,gK:()=>o,B:()=>p,Ir:()=>c,jI:()=>m,a6:()=>g,AU:()=>y,Xp:()=>a,mW:()=>u,Cs:()=>h,nM:()=>i,ty:()=>d});let s=require("@prisma/client"),n=globalThis.prisma??new s.PrismaClient;async function a(){return await n.product.findMany({orderBy:{createdAt:"desc"}})}async function i(e,t){try{return await n.product.update({where:{id:e},data:{...t,badges:t.badges,images:t.images,finishes:t.finishes,specs:t.specs,priceTiers:t.priceTiers}})}catch(e){return console.error("Error updating product:",e),null}}async function o(e){return await n.product.create({data:{id:e.id,nameEn:e.nameEn,nameAr:e.nameAr,descEn:e.descEn,descAr:e.descAr,category:e.category,seriesEn:e.seriesEn,seriesAr:e.seriesAr,badges:e.badges||[],image:e.image,images:e.images||[],finishes:e.finishes,specs:e.specs,ref:e.ref,price:e.price,priceTiers:e.priceTiers,showInStore:e.showInStore??!0}})}async function c(e){try{return await n.product.delete({where:{id:e}}),!0}catch{return!1}}async function u(){return await n.project.findMany({orderBy:{createdAt:"desc"}})}async function d(e,t){try{return await n.project.update({where:{id:e},data:{...t,tags:t.tags,images:t.images}})}catch(e){return console.error("Error updating project:",e),null}}async function p(e){return await n.project.create({data:{id:e.id,titleEn:e.titleEn,titleAr:e.titleAr,descEn:e.descEn,descAr:e.descAr,category:e.category,subcategory:e.subcategory,status:e.status,tags:e.tags||[],images:e.images||[],featuredImage:e.featuredImage,lastEdited:e.lastEdited}})}async function m(e){try{return await n.project.delete({where:{id:e}}),!0}catch{return!1}}async function g(){return await n.inquiry.findMany({orderBy:{createdAt:"desc"}})}async function l(e){return await n.inquiry.create({data:{name:e.name,email:e.email,phone:e.phone,message:e.message,productId:e.productId,status:e.status||"pending"}})}async function y(){return await n.order.findMany({orderBy:{createdAt:"desc"}})}async function f(e){return await n.order.create({data:{customerName:e.customerName,email:e.email,phone:e.phone,totalAmount:e.totalAmount,items:e.items,status:e.status||"pending"}})}async function h(e,t){try{return await n.order.update({where:{id:e},data:{status:t}})}catch{return null}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972],()=>r(9738));module.exports=s})();