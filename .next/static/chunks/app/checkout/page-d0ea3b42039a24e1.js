(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{7431:function(e,s,r){Promise.resolve().then(r.bind(r,5680))},6463:function(e,s,r){"use strict";var t=r(1169);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(s,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},5680:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return o}});var t=r(7437),a=r(2265),n=r(1435),l=r(6371),i=r(1505),d=r(7138),c=r(6463);function o(){let{items:e,cartTotal:s,clearCart:r,updateQuantity:o}=(0,n.j)(),{t:x,locale:m}=(0,l.Q)(),u=(0,c.useRouter)(),[h,b]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",city:"",address:"",notes:""}),[p,f]=(0,a.useState)(!1),[g,j]=(0,a.useState)(""),[y,N]=(0,a.useState)("cod"),v=e=>{b({...h,[e.target.name]:e.target.value})},A=async t=>{t.preventDefault(),j(""),f(!0);try{if(!(await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e.map(e=>{var s;return{productId:e.product.id,quantity:e.quantity,finish:null===(s=e.options)||void 0===s?void 0:s.finish,price:e.product.price}}),customer:h,total:s+("cod"===y?15:0),paymentMethod:y,locale:m})})).ok)throw Error("Failed to place order");r(),alert("ar"===m?"تم استلام طلبك بنجاح! سنتواصل معك قريباً.":"Order placed successfully! We will contact you shortly."),u.push("/")}catch(e){j("ar"===m?"حدث خطأ أثناء إرسال الطلب. يرجى المحاولة مرة أخرى.":"Error placing order. Please try again.")}finally{f(!1)}};return 0===e.length?(0,t.jsx)(i.Z,{children:(0,t.jsxs)("div",{className:"container py-20 text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"ar"===m?"سلة المشتريات فارغة":"Your Application Cart is Empty"}),(0,t.jsx)(d.default,{href:"/store",className:"btn btn-gold inline-flex items-center gap-2",children:"ar"===m?"تصفح المتجر":"Browse Store"})]})}):(0,t.jsx)(i.Z,{children:(0,t.jsx)("div",{className:"bg-[#F5F5F0] min-h-screen py-12",children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8 font-cairo text-[#1A1A1A]",children:"ar"===m?"إتمام الطلب":"Checkout"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-8 h-8 rounded-full bg-[#D4A017] text-white flex items-center justify-center text-sm",children:"1"}),"ar"===m?"بيانات العميل":"Customer Details"]}),(0,t.jsxs)("form",{id:"checkout-form",onSubmit:A,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ar"===m?"الاسم الأول":"First Name"}),(0,t.jsx)("input",{type:"text",name:"firstName",required:!0,className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#D4A017] outline-none",onChange:v})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ar"===m?"الاسم الأخير":"Last Name"}),(0,t.jsx)("input",{type:"text",name:"lastName",required:!0,className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#D4A017] outline-none",onChange:v})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ar"===m?"البريد الإلكتروني":"Email Address"}),(0,t.jsx)("input",{type:"email",name:"email",required:!0,className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#D4A017] outline-none",onChange:v})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ar"===m?"رقم الهاتف (واتساب)":"Phone Number (WhatsApp)"}),(0,t.jsx)("input",{type:"tel",name:"phone",required:!0,placeholder:"+966...",className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#D4A017] outline-none",onChange:v})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ar"===m?"المدينة":"City"}),(0,t.jsx)("input",{type:"text",name:"city",required:!0,className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#D4A017] outline-none",onChange:v})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ar"===m?"العنوان بالتفصيل":"Address Details"}),(0,t.jsx)("textarea",{name:"address",required:!0,rows:3,className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#D4A017] outline-none",onChange:v})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ar"===m?"ملاحظات إضافية":"Additional Notes"}),(0,t.jsx)("textarea",{name:"notes",rows:2,className:"w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-[#D4A017] outline-none",onChange:v})]}),g&&(0,t.jsx)("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm",children:g})]})]}),(0,t.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm mt-8",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-8 h-8 rounded-full bg-[#D4A017] text-white flex items-center justify-center text-sm",children:"2"}),"ar"===m?"طريقة الدفع":"Payment Method"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("label",{className:"flex items-start gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all ".concat("cod"===y?"border-[#D4A017] bg-[#FFF9E6]":"border-gray-100 hover:border-gray-200"),children:[(0,t.jsx)("input",{type:"radio",name:"payment",value:"cod",checked:"cod"===y,onChange:()=>N("cod"),className:"mt-1 w-4 h-4 accent-[#D4A017]"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("span",{className:"font-bold text-[#1A1A1A]",children:"ar"===m?"الدفع عند الاستلام":"Cash on Delivery"}),(0,t.jsx)("span",{className:"text-xs font-bold text-[#D4A017] bg-[#D4A017]/10 px-2 py-1 rounded",children:"+15 SAR"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"ar"===m?"الدفع نقداً عند استلام الطلب":"Pay cash when you receive your order"})]})]}),(0,t.jsxs)("label",{className:"flex items-start gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all ".concat("bank_transfer"===y?"border-[#D4A017] bg-[#FFF9E6]":"border-gray-100 hover:border-gray-200"),children:[(0,t.jsx)("input",{type:"radio",name:"payment",value:"bank_transfer",checked:"bank_transfer"===y,onChange:()=>N("bank_transfer"),className:"mt-1 w-4 h-4 accent-[#D4A017]"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("span",{className:"font-bold text-[#1A1A1A] block mb-1",children:"ar"===m?"تحويل بنكي":"Bank Transfer"}),"bank_transfer"===y&&(0,t.jsxs)("div",{className:"mt-3 p-3 bg-white rounded border border-gray-200 text-sm",children:[(0,t.jsx)("p",{className:"font-bold mb-1",children:"ar"===m?"تفاصيل الحساب:":"Account Details:"}),(0,t.jsx)("p",{className:"text-gray-600 font-mono text-xs mb-1",children:"Al Rajhi Bank"}),(0,t.jsx)("p",{className:"text-gray-600 font-mono text-xs mb-1",children:"SA58 8000 0000 0000 0000 0000"}),(0,t.jsx)("p",{className:"text-gray-600 font-mono text-xs",children:"Saudi Wood Factory"})]})]})]}),(0,t.jsxs)("label",{className:"flex items-start gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all ".concat("tabby"===y?"border-[#00E5C0] bg-[#F0FFFB]":"border-gray-100 hover:border-gray-200"),children:[(0,t.jsx)("input",{type:"radio",name:"payment",value:"tabby",checked:"tabby"===y,onChange:()=>N("tabby"),className:"mt-1 w-4 h-4 accent-[#00E5C0]"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("span",{className:"font-bold text-[#1A1A1A]",children:"ar"===m?"تابي":"Tabby"}),(0,t.jsx)("span",{className:"text-[10px] font-bold bg-[#00E5C0] text-black px-2 py-0.5 rounded-full",children:"ar"===m?"4 دفعات":"Split in 4"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"ar"===m?"بدون فوائد أو رسوم":"No interest or fees"})]})]}),(0,t.jsxs)("label",{className:"flex items-start gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all ".concat("tamara"===y?"border-[#ED7862] bg-[#FFF2F0]":"border-gray-100 hover:border-gray-200"),children:[(0,t.jsx)("input",{type:"radio",name:"payment",value:"tamara",checked:"tamara"===y,onChange:()=>N("tamara"),className:"mt-1 w-4 h-4 accent-[#ED7862]"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("span",{className:"font-bold text-[#1A1A1A]",children:"ar"===m?"تمارا":"Tamara"}),(0,t.jsx)("span",{className:"text-[10px] font-bold bg-[#ED7862] text-white px-2 py-0.5 rounded-full",children:"ar"===m?"4 دفعات":"Split in 4"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"ar"===m?"بدون فوائد أو رسوم":"No interest or fees"})]})]})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-sm sticky top-24",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-8 h-8 rounded-full bg-[#F0F0EC] text-[#1A1A1A] flex items-center justify-center text-sm border border-gray-200",children:"2"}),"ar"===m?"ملخص الطلب":"Order Summary"]}),(0,t.jsx)("div",{className:"space-y-4 mb-6",children:e.map(e=>{var s;return(0,t.jsxs)("div",{className:"flex gap-4 py-4 border-b border-gray-100 last:border-0",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 relative",children:(0,t.jsx)("img",{src:e.product.image,alt:"",className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-[#1A1A1A]",children:"ar"===m?e.product.nameAr:e.product.nameEn}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:(null===(s=e.options)||void 0===s?void 0:s.finish)||"Default"}),(0,t.jsxs)("div",{className:"flex items-center border border-gray-200 rounded-md w-fit bg-white",children:[(0,t.jsx)("button",{onClick:()=>o(e.product.id,e.quantity-1),className:"px-2 py-0.5 text-gray-500 hover:bg-gray-50 text-sm disabled:opacity-50",disabled:e.quantity<=1,children:"-"}),(0,t.jsx)("span",{className:"px-2 text-xs font-semibold min-w-[20px] text-center",children:e.quantity}),(0,t.jsx)("button",{onClick:()=>o(e.product.id,e.quantity+1),className:"px-2 py-0.5 text-gray-500 hover:bg-gray-50 text-sm",children:"+"})]})]}),(0,t.jsxs)("div",{className:"font-bold text-sm",children:[(()=>{let s=e.product.price||0;if(e.product.priceTiers){let r=e.product.priceTiers.sort((e,s)=>s.min-e.min).find(s=>e.quantity>=s.min);r&&(s=r.price)}return(s*e.quantity).toLocaleString()})()," SAR"]})]},e.product.id)})}),(0,t.jsxs)("div",{className:"border-t border-gray-100 pt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"ar"===m?"المجموع الفرعي":"Subtotal"}),(0,t.jsxs)("span",{children:[s.toLocaleString()," SAR"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"ar"===m?"الشحن":"Shipping"}),(0,t.jsx)("span",{className:"text-green-600 text-sm",children:"ar"===m?"مجاني لفترة محدودة":"Free (Limited Time)"})]}),"cod"===y&&(0,t.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,t.jsx)("span",{children:"ar"===m?"رسوم الدفع عند الاستلام":"COD Fee"}),(0,t.jsxs)("span",{children:[15," SAR"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xl font-bold text-[#1A1A1A] pt-2 border-t border-gray-100 mt-2",children:[(0,t.jsx)("span",{children:"ar"===m?"الإجمالي":"Total"}),(0,t.jsxs)("span",{children:[(s+("cod"===y?15:0)).toLocaleString()," SAR"]})]})]}),(0,t.jsxs)("div",{className:"mt-6 bg-[#FFF9E6] p-4 rounded-xl border border-[#D4A017]/20 flex gap-3",children:[(0,t.jsx)("span",{className:"text-xl",children:"\uD83D\uDEE1️"}),(0,t.jsx)("p",{className:"text-xs text-[#8B6914] leading-relaxed",children:"ar"===m?"تسوقك آمن 100%. جميع المنتجات مضمونة من المصنع مباشرة مع ضمان استبدال أو استرجاع.":"Your shopping is 100% secure. All products are guaranteed directly from the factory with a replacement or return warranty."})]}),(0,t.jsx)("button",{type:"submit",form:"checkout-form",disabled:p,className:"w-full bg-[#1A1A1A] text-white py-4 rounded-xl font-bold text-lg hover:bg-[#D4A017] transition-colors mt-6 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:p?"ar"===m?"جاري الإرسال...":"Processing...":"ar"===m?"تأكيد الطلب (".concat((s+("cod"===y?15:0)).toLocaleString()," ر.س)"):"Place Order (".concat((s+("cod"===y?15:0)).toLocaleString()," SAR)")})]})})]})]})})})}},1505:function(e,s,r){"use strict";r.d(s,{Z:function(){return l}});var t=r(7437);r(2265);var a=r(7936),n=r(5933);function l(e){let{children:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z,{}),(0,t.jsx)("main",{style:{paddingTop:72},children:s}),(0,t.jsx)(n.Z,{})]})}}},function(e){e.O(0,[138,59,636,960,971,23,744],function(){return e(e.s=7431)}),_N_E=e.O()}]);